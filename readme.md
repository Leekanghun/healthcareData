건강보험공단 요양원 정보 스크래핑 프로젝트
---
#### 시작하기
- 패키지 설치
  `$npm install`
- 시작
  `$npm start`

#### 설명
건강보험공단에서 요양기관검색 & 데이터 수집
데이터 수집이 완료되면 result 폴더에 날짜/지역별로 데이터 생성
에러 발생 시 errorLog 폴더에 에러내용 쌓아둠. 
  > - try/catch 형식으로 에러 잡아서 저장하려했으나, 왜인지 error객체가 빈객체로 저장되고있음
  > - 행동에 대한 로그를 함께 쌓아야, 에러 원인 파악이 쉬워질 듯
####  폴더/파일 구조
`index.js`  스크래핑 로직

`result`    스크래핑 결과물(json파일)을 넣을 폴더

`log`       진행완료시, 과정 로그파일을 쌓아둠

`errorLog`  에러 발생시, 에러로그 쌓아둠

#### 실행파일
`index.js`

#### 라이브러리
`puppeteer.js`

#### 요구조건
- 급여종류 기준 "노인요양시설", "방문요양", "주야간보호"에 해당하는 장기요양기관 검색.
- 지도 좌표 정보 가져오기


#### 분석결과

##### 1. 요양기관검색
  - 검색조건(급여종류) 다중 선택 시, and 조건이 아니라 or 조건인걸로 보이므로, 검색조건을 각각 돌리는게 아닌 한번에 조건을 걸어놓고 검색하는 방식으로 진행.
  - 검색 시, 새창에서 검색조건이 표기되는데, 검색조건에 따라 url 파라미터가 변경되는걸로 확인.
    급여종류: `searchAdminKindCdS`
      - 노인요양시설: `01`
      - 방문요양: `03`
      - 주야간보호: `06`
  - 시,도 코드에 따라 검색을 나눠사 해야하는데(전국 검색이 없음), 변동될일이 거의 없다고 판단하여 `index.js`에 시도코드 하드코딩해서 for문돌려 검색 실행


##### ~~2. 지도 좌표 정보 가져오기~~ 
  - ~~지도관련 url 쿼리 `ltcAdminSym` 값에 요양기관 코드를 세팅하면 해당 기관의 지도가 표시되는 것 확인.~~
  - ~~응답값에 json형태로 해당 기관의 주소정보 & 지도좌표가 떨어지므로 이부분을 가져온다면 지도좌표 가져올 수 있을걸로 보임.~~
-  _요양원 개수가 많아 위 방법은 시간이 너무 많이 소요되서 스크래핑 대상에서는 제외됨_
  

